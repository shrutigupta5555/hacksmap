<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hackathon Map || HacksMap</title>

    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/css/hack.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <!--To include marker extension-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css" />

    <link rel="shortcut icon" href="static/icon.png" type="image/x-icon">

    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js"></script>

</head>
<body>

  <h1 style="text-align: center;margin: 2rem auto 0 auto; color: wheat; font-size: larger;">you've been hacking with the world, like literally âœ¨</h1>
  <div class="container">
    <div id="map" style="height: 650px; width: 100%; margin-top: 3%;"></div>
  </div>
  
  <script type="text/javascript">
    var nameAndLatlng =JSON.parse('{{ nameAndLatlng | tojson | safe}}')
    console.log(nameAndLatlng)
    var map = L.map('map').setView([50.84673, 4.35247], 3);
    L.tileLayer('https://tile.openstreetmap.be/osmbe/{z}/{x}/{y}.png', {
     attribution:
         '&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors' +
         ', Tiles courtesy of <a href="https://geo6.be/">GEO-6</a>',
     maxZoom: 18
    }).addTo(map);

    var markers = L.markerClusterGroup();
    var greenIcon;
    for (username in nameAndLatlng){
        greenIcon = L.icon({
          iconUrl: nameAndLatlng[username][1],
          iconSize:     [38, 95], // size of the icon
          iconAnchor:   [22, 94], // point of the icon which will correspond to marker's location
        });
        // L.marker([51.5, -0.09], {icon: greenIcon}).addTo(map);
        markers.addLayer(L.marker(nameAndLatlng[username][0], {icon: greenIcon}));
    }
    map.addLayer(markers);
    // var marker = L.marker([50.84673, 4.35247]).addTo(map);
    // var popup = marker.bindPopup('<b>Hello world!</b><br />I am a popup.');
  </script>

</body>
</html>
